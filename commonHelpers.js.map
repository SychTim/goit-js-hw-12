{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"44874409-49a696090f67a7075082072ae\";\naxios.defaults.baseURL = 'https://pixabay.com';\n\nasync function request(q, page = 1) {\n    const response = await axios.get('/api/', {\n        params: {\n            key: API_KEY,\n            q: q,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: \"true\",\n            per_page: 15,\n            page: page\n        }\n    })\n    \n    return response;\n}\n\nexport default request;","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst lightbox = new SimpleLightbox('.gallery a');\n\nfunction markUpMaker(data) {\n    if (data.length\n        === 0) {\n        iziToast.show({\n            title: 'Error',\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            backgroundColor: \"red\"\n        });\n        return;\n    }\n    const markUp = data.map(({comments, downloads, views, likes, largeImageURL, webformatURL, tags}) => {\n    return `\n        <a class=\"gallery-item\" href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\">\n            <div class=\"inscriptions\">\n            <div>\n                <p class=\"insc-name\">Likes</p>\n                <p class=\"insc-value\">${likes}</p>\n            </div>\n            <div>\n                <p class=\"insc-name\">Views</p>\n                <p class=\"insc-value\">${views}</p>\n            </div>\n            <div>\n                <p class=\"insc-name\">Comments</p>\n                <p class=\"insc-value\">${comments}</p>\n            </div>\n            <div>\n                <p class=\"insc-name\">Downloads</p>\n                <p class=\"insc-value\">${downloads}</p>\n            </div>\n            </div>\n        </a>`\n        }).join(\"\");\n    gallery.insertAdjacentHTML('beforeend', markUp);\n\n    lightbox.refresh();\n}\n\nexport default markUpMaker;","import request from \"./js/pixabay-api\";\nimport markUpMaker from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst LMbutton = document.querySelector('.load-more button')\n\nform.addEventListener('submit', submitList);\n\nlet page;\nlet q;\n\nasync function submitList(evt) {\n    evt.preventDefault();\n    gallery.innerHTML = `<span class=\"loader\"></span>`;\n    LMbutton.style.display = \"\";\n    LMbutton.removeEventListener('click', loudMore);\n    q = encodeURIComponent(form.imgName.value.trim());\n    page = 1;\n\n    try {\n        const response = await request(q);\n        gallery.innerHTML = \"\";\n        markUpMaker(response.data.hits);\n        console.log(response);\n        if (response.data.totalHits > 15) {\n            LMbutton.style.display = \"inline-block\";\n            LMbutton.addEventListener('click', loudMore);\n        }\n    } catch (error) {\n        console.error(error);\n        iziToast.error({\n            message: error.message\n        })\n    } finally {\n        form.reset();\n    }\n\n}\n\nasync function loudMore () {\n    page += 1;\n    console.log(page);\n    try {\n        const response = await request(q, page);\n        markUpMaker(response.data.hits);\n        console.log(response);\n        const heightOfEl = document.querySelector(\".gallery a\").getBoundingClientRect().height;\n        window.scrollBy({\n            top: heightOfEl*2,\n            behavior: \"smooth\",\n        });\n        if (!(response.data.totalHits - page*15 > 0)) {\n            LMbutton.style.display = \"\";\n            LMbutton.removeEventListener('click', loudMore);\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\"\n            })\n        }\n    } catch (error) {\n        console.error(error);\n        iziToast.error({\n            message: error.message\n        })\n    }\n\n}"],"names":["API_KEY","axios","request","q","page","gallery","lightbox","SimpleLightbox","markUpMaker","data","iziToast","markUp","comments","downloads","views","likes","largeImageURL","webformatURL","tags","form","LMbutton","submitList","evt","loudMore","response","error","heightOfEl"],"mappings":"owBAEA,MAAMA,EAAU,qCAChBC,EAAM,SAAS,QAAU,sBAEzB,eAAeC,EAAQC,EAAGC,EAAO,EAAG,CAahC,OAZiB,MAAMH,EAAM,IAAI,QAAS,CACtC,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAMC,CACT,CACT,CAAK,CAGL,CCdA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,IAAIC,EAAe,YAAY,EAEhD,SAASC,EAAYC,EAAM,CACvB,GAAIA,EAAK,SACD,EAAG,CACPC,EAAS,KAAK,CACV,MAAO,QACP,QAAS,2EACT,gBAAiB,KAC7B,CAAS,EACD,MACH,CACD,MAAMC,EAASF,EAAK,IAAI,CAAC,CAAC,SAAAG,EAAU,UAAAC,EAAW,MAAAC,EAAO,MAAAC,EAAO,cAAAC,EAAe,aAAAC,EAAc,KAAAC,CAAI,IACvF;AAAA,wCAC6BF,CAAa;AAAA,wBAC7BC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA,wCAIVH,CAAK;AAAA;AAAA;AAAA;AAAA,wCAILD,CAAK;AAAA;AAAA;AAAA;AAAA,wCAILF,CAAQ;AAAA;AAAA;AAAA;AAAA,wCAIRC,CAAS;AAAA;AAAA;AAAA,aAIxC,EAAE,KAAK,EAAE,EACdR,EAAQ,mBAAmB,YAAaM,CAAM,EAE9CL,EAAS,QAAO,CACpB,CCxCA,MAAMa,EAAO,SAAS,cAAc,OAAO,EACrCd,EAAU,SAAS,cAAc,UAAU,EAC3Ce,EAAW,SAAS,cAAc,mBAAmB,EAE3DD,EAAK,iBAAiB,SAAUE,CAAU,EAE1C,IAAIjB,EACAD,EAEJ,eAAekB,EAAWC,EAAK,CAC3BA,EAAI,eAAc,EAClBjB,EAAQ,UAAY,+BACpBe,EAAS,MAAM,QAAU,GACzBA,EAAS,oBAAoB,QAASG,CAAQ,EAC9CpB,EAAI,mBAAmBgB,EAAK,QAAQ,MAAM,KAAI,CAAE,EAChDf,EAAO,EAEP,GAAI,CACA,MAAMoB,EAAW,MAAMtB,EAAQC,CAAC,EAChCE,EAAQ,UAAY,GACpBG,EAAYgB,EAAS,KAAK,IAAI,EAC9B,QAAQ,IAAIA,CAAQ,EAChBA,EAAS,KAAK,UAAY,KAC1BJ,EAAS,MAAM,QAAU,eACzBA,EAAS,iBAAiB,QAASG,CAAQ,EAElD,OAAQE,EAAO,CACZ,QAAQ,MAAMA,CAAK,EACnBf,EAAS,MAAM,CACX,QAASe,EAAM,OAC3B,CAAS,CACT,QAAc,CACNN,EAAK,MAAK,CACb,CAEL,CAEA,eAAeI,GAAY,CACvBnB,GAAQ,EACR,QAAQ,IAAIA,CAAI,EAChB,GAAI,CACA,MAAMoB,EAAW,MAAMtB,EAAQC,EAAGC,CAAI,EACtCI,EAAYgB,EAAS,KAAK,IAAI,EAC9B,QAAQ,IAAIA,CAAQ,EACpB,MAAME,EAAa,SAAS,cAAc,YAAY,EAAE,sBAAuB,EAAC,OAChF,OAAO,SAAS,CACZ,IAAKA,EAAW,EAChB,SAAU,QACtB,CAAS,EACKF,EAAS,KAAK,UAAYpB,EAAK,GAAK,IACtCgB,EAAS,MAAM,QAAU,GACzBA,EAAS,oBAAoB,QAASG,CAAQ,EAC9Cb,EAAS,KAAK,CACV,QAAS,4DACzB,CAAa,EAER,OAAQe,EAAO,CACZ,QAAQ,MAAMA,CAAK,EACnBf,EAAS,MAAM,CACX,QAASe,EAAM,OAC3B,CAAS,CACJ,CAEL"}